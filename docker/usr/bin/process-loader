#!/bin/bash
set -e

(>&2 echo "           ______________________ ")
(>&2 echo "          /\  ________  ________ \ ")
(>&2 echo "         /  \ \______/\ \______/\ \ ")
(>&2 echo "        / /\ \ \  / /\ \ \  / /\ \ \ ")
(>&2 echo "       / / /\ \ \/ / /\ \ \/ / /\ \ \ ")
(>&2 echo "      / / /__\ \ \/_/__\_\ \/_/__\_\ \ ")
(>&2 echo "     / /_/____\ \  ________  ________ \ ")
(>&2 echo "    /  \ \____/  \ \______/\ \______/\ \ ")
(>&2 echo "   / /\ \ \  / /\ \ \  / /\ \ \  / /\ \ \ ")
(>&2 echo "  / / /\ \ \/ / /\ \ \/ / /\ \ \/ / /\ \ \ ")
(>&2 echo " / / /__\ \/ / /__\ \ \/_/__\_\ \/_/__\_\ \ ")
(>&2 echo "/ /_/___ \  /_/____\ \_____________________\ ")
(>&2 echo "\ \ \____/  \ \____/ / _______   _______   / ")
(>&2 echo " \ \ \  / /\ \ \  / / /\ \  / / /\ \  / / / ")
(>&2 echo "  \ \ \/ / /\ \ \/ / /\ \ \/ / /\ \ \/ / / ")
(>&2 echo "   \ \/ / /__\ \/ / /__\_\/ / /__\_\/ / / ")
(>&2 echo "    \  /_/____\  / /______\/ /______\/ / ")
(>&2 echo "     \ \ \____/ / ________  ________  / ")
(>&2 echo "      \ \ \  / / /\ \  / / /\ \  / / / ")
(>&2 echo "       \ \ \/ / /\ \ \/ / /\ \ \/ / / ")
(>&2 echo "        \ \/ / /__\_\/ / /__\_\/ / / ")
(>&2 echo "         \  / /______\/ /______\/ / ")
(>&2 echo "          \/_____________________/ ")
(>&2 echo "")

: "${PRORCESSES_DIRECTORY:=/usr/src}"
: "${PRORCESSES_FILE:=$PRORCESSES_DIRECTORY/processes.txt}"
if [ -z "$(ls -A "$PRORCESSES_FILE" 2> /dev/null)" ]; then
	touch "$PRORCESSES_FILE"
fi

for element in $(cat "$PRORCESSES_FILE"); do
  (>&2 echo "Execute $element")
  . "$element"
done

tail -f /dev/stdout